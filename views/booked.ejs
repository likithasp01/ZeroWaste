<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZeroWaste - Booked</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
</head>

<body>
  <%- include('partials/navbar') %>

  <h1>Booked Food </h1>

    <div class="post-container">
      <% if (posts.length === 0) { %>
      <p>No food has been booked yet.</p>
      <% } else { %>
        <% posts.forEach(post => { %>

    <div class="post-card" style="position: relative;">
      <form action="/cancel/<%= post.id %>" method="POST"
        onsubmit="return confirm('Are you sure you want to cancel this food?')"
        style="position: absolute; top: 10px; right: 10px;">
        <button type="submit" class="del" title="cancel this food">‚ãÆ</button>
      </form>

      <img src="<%= post.imageUrl %>" alt="Food Image">
      <p><strong>Posted By:</strong> <%= post.name %></p>
      <p><strong>Contact Number:</strong> <%= post.contact %></p>

      <div class="description">
        <strong>Food Details:</strong>
          <span>
            <%= post.description.length > 100 ? post.description.substring(0, 100) + '...' : post.description %>
          </span>
      </div>

      <p><strong>Pickup Location:</strong> <%= post.address %></p>
      
      <p class="status">‚úÖYou are Successfully Booked this Food</p>

      <p>
        <a class="btn" href="https://www.google.com/maps/search/?api=1&query=<%= encodeURIComponent(post.location) %>" target="_blank">
          üìçView on Map
        </a>
      </p>
      <p class="text-muted" style="font-size: 10px;">
        Posted on: <%= new Date(post.createdAt).toLocaleString("en-IN") %>
      </p>
    </div>
      <% }); %>
    <% } %>

<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
</script>

</body>
</html>
